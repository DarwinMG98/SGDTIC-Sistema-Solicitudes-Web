<!DOCTYPE html>
<html lang="es">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <meta charset="UTF-8" />
  <title>Dashboard Administrador</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css') }}">
</head>
<body class="fondo-azul">

  
  <img src="{{ url_for('static', filename=logo_path) }}" class="decoracion-izquierda">


<div class="iconos-superiores"
     style="position: absolute; top: 30px; right: 40px; display: flex; align-items: center; gap: 20px; z-index: 10;">
  <!-- Engranaje con menú desplegable -->
  <div class="dropdown" style="display:inline-block;">
    <button class="btn btn-secondary dropdown-toggle"
            type="button" data-bs-toggle="dropdown"
            aria-expanded="false"
            style="background: none; border: none; box-shadow: none;">
      <img src="{{ url_for('static', filename='img/engranaje.png') }}" class="icono" />
    </button>
    <ul class="dropdown-menu dropdown-menu-end">
      <li>
        <a class="dropdown-item" href="{{ url_for('actualizar_logo') }}">
          Actualizar Logo
        </a>
      </li>
    </ul>
  </div>

  <img src="{{ url_for('static', filename='img/logout.png') }}" class="icono-salida" />
  <a href="/logout">
    <button class="cerrar-sesion">Cerrar Sesión</button>
  </a>
</div>

  <div class="contenedor-dashboard">

    <h1 class="titulo-bienvenida">Bienvenido, Administrador</h1>

    <div class="contenedor-tabla">
      <h3 class="subtitulo-tabla">Historial de Solicitudes</h3>
      <table>
        <tr>
          <th>N°</th>
          <th>Tipo de Solicitud</th>
          <th>Fecha</th>
          <th>Estado</th>
          <th>Acción</th>
        </tr>
        {% for solicitud in solicitudes %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ solicitud[1] }}</td>
          <td>{{ solicitud[2] }}</td>
          <td>
            <span class="estado 
              {% if solicitud[3] == 'pendiente' %}pendiente
              {% elif solicitud[3] == 'aprobado' %}aprobado
              {% elif solicitud[3] == 'rechazado' %}rechazado
              {% endif %}">
            </span>
          </td>
          <td>
            {% if solicitud[3] == 'pendiente' and solicitud[4] %}
              <span class="badge badge-correccion">Corregida</span>
              <a href="{{ url_for('revisar_solicitud', id=solicitud[0]) }}" class="btn-revisar">Revisar</a>
            {% elif solicitud[3] == 'pendiente' %}
              <a href="{{ url_for('revisar_solicitud', id=solicitud[0]) }}" class="btn-revisar">Revisar</a>
            {% elif solicitud[3] == 'aprobado' %}
              <span class="badge badge-aprobado">Aprobado</span>
            {% elif solicitud[3] == 'rechazado' %}
              <span class="badge badge-rechazado">Rechazado</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </table>

    </div>
  </div>

  <a href="{{ url_for('inicio') }}">
    <img src="{{ url_for('static', filename='img/volver.png') }}" class="volver">
  </a>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
